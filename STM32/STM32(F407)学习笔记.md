# STM32(F407)学习笔记

**引脚分类：**

![](.\image\引脚分类.png)

## **GPIO说明**

![](.\image\GPIO框图.png)

### **寄存器分类**

#### 端口模式寄存器（GPIOx_MODER)）

输出方式有：（两个比特位）

| 00   | 输入（复位状态）（采用TTL模式，低于1.8v为0；高于1.8v为1） |
| ---- | --------------------------------------------------------- |
| 01   | 通用输出模式                                              |
| 10   | 复用功能模式                                              |
| 11   | 模拟模式                                                  |

#### 端口输出类型寄存器（GPIOx_OTPYPER）

##### 两种输出方式

| 0    | 输出退挽（复位状态） | 正常输出0和1；用于链接数字期间，高电平有VDD决定，低电平有VSS决定<br />其开关效率高，电流大，驱动能力强 |
| ---- | -------------------- | ------------------------------------------------------------ |
| 1    | 输出开漏             | 只能输出0.要输出1必须在IO口外接电源.多用于I2C和SMBUWS总线    |

###### 推挽输出

![](.\image\推挽输出.png)

###### 开漏输出

![](.\image\开漏输出.png)

#### 端口输入数据寄存器(GPIOx_IDR)

#### 端口输出速度寄存器(GPIOx_OSPEEDR)

#### 端口输出数据寄存器(GPIOx_ODR)

#### 端口置位寄存器(GPIOx_BSRR)

#### 端口上拉/下拉寄存器(GPIOx_PUPDR)

​		在GPIO端口中，电阻上拉和电阻下拉的作用是为了在GPIO输入模式下，防止GPIO输入口浮动，从而造成信号干扰的情况。

​		电阻上拉（Pull Up）与电阻下拉（Pull Down）的区别在于起作用的电阻连接的位置。当一个GPIO口设为**输入模式**时，如果这个GPIO口没有外部信号（也就是不接任何器件），那么它的电平就是一个**不确定的**高电平或低电平，也就是所谓的**"浮动"**。为了避免这种情况，一个可供选择的方法就是在这个GPIO口的输入端外加一个足够大的电阻，并通过连接到信号电源电压或地上电压的方式来使得这个GPIO口处于高电平或低电平。

​		**电阻上拉**就是将GPIO口上的电阻连接到一个**电源电压**上（如Vcc），一般用于场景中需要设定**默认输入为高电平**-例如开关常闭模式，选择电阻上拉后那个GPIO口处于高电平就是开。而**电阻下拉**就是将GPIO口上的电阻连接到**地上电压**（GND），一般用于场景中需要**设定默认输入为低电平**-例如开关常开模式，选择电阻下拉后那个GPIO口处于低电平就是开。